(()=>{var e;(e=jQuery).fn.bsmsCodePicker=function(t={}){const s=e.extend({nrOfBoxes:6,allowedChars:"0123456789",inputName:"bsms-code",translate:{"\\w":e=>e.toUpperCase()},lastDigitEntered:null,showCredits:!0},t);return this.each((function(){const t=e(this),i=e(`<input type="hidden" name="${s.inputName}">`).appendTo(t);for(var n=0;n<s.nrOfBoxes;n++)t.append(`<input type="text" class="bsms-code-digit bsms-code-digit-${n}">`);s.showCredits&&t.append('<a class="bsms-code-digit-credits" href="https://www.berlinsms.de">code-picker powered by berlinsms.de</a>');const o=t.find(".bsms-code-digit");o.on("input",(function(){const t=o.index(this),n=o.eq(t+1);var a=e(this).val();if("object"==typeof s.translate)for(key in s.translate)a=a.replaceAll(new RegExp(key,"g"),s.translate[key]);else console.log("typeof settings.translate should be object");const l=a.split("").filter((e=>s.allowedChars.includes(e)));var r=l?.shift();e(this).val(r),r&&n.focus().val(l.join("")).trigger("input");for(var d="",c=0;c<s.nrOfBoxes;c++)d+=e(o[c]).val();i.val(d),r&&!n.length&&s.lastDigitEntered&&s.lastDigitEntered(d)})),o.on("keyup",(function(e){if(8===e.keyCode&&""===this.value){const e=o.index(this);e>0&&o.eq(e-1).focus()}})),o.on("focus",(function(){e(this).select();const t=o.index(this);if(0==t)return;const i=o.eq(t-1);i.val()&&s.allowedChars.includes(i.val())||i.focus()}))})),this.lastDigitEntered=e=>(s.lastDigitEntered=e,this),this}})();